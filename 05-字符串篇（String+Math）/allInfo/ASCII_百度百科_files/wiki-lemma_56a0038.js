var $=require("wiki-common:widget/lib/jquery/jquery.js"),BaikeShare=function(){var defaultConfig={common:{bdText:"自定义分享内容",bdDesc:"自定义分享摘要",bdUrl:"自定义分享url地址",bdPic:"自定义分享图片"},share:[{bdSize:16}]};window._bd_share_config=defaultConfig,this.setCommon=function(e){window._bd_share_config.common=e?e:defaultConfig.common},this.regist=function(e){window._bd_share_config.share.push(e)},this.load=function(){with(document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion="+~(-new Date/36e5)]}};window.BKShare||(window.BKShare=new BaikeShare,$(document).bind("ready",function(){window.BKShare.load()}));
;var $=require("wiki-common:widget/lib/jquery/jquery.js"),Linker=function(){var e={isHeader:!0},n={isTailer:!0};this.appendNode=function(t){e.next||(e.next=t,t.prev=e),n.prev?(n.prev.next=t,t.prev=n.prev,n.prev=t,t.next=n):(n.prev=t,t.next=n)},this.deleteNode=function(e){e.prev.next=e.next,e.next.prev=e.prev},this.hasNode=function(){return!!e.next&&!e.next.isTailer},this.iterator=function(){var n=e;return{next:function(){return ret=n.next,ret&&!ret.isTailer&&ret.next?(n=n.next,ret):null}}}},JavaScriptLazyLoad=function(){var e=new Linker,n=null,t=function(){for(var n=e.iterator(),t=n.next();t;)i(t),t=n.next()},i=function(e){if(e.dom&&e.loadFunc){var n=e.dom.offset().top,t=$(window).scrollTop()+$(window).height(),i="undefined"!=typeof e.distance?e.distance:200;!e.dom.is(":hidden")&&i>=n-t&&(r(e),e.loadFunc())}},r=function(n){e.deleteNode(n),e.hasNode()||$(window).unbind("scroll",d)};this.regist=function(n){return e.appendNode(n),n},this.unregist=function(){};var o=function(){$(window).bind("scroll click",d),$(document).ready(function(){d()})},d=function(){n&&clearTimeout(n),n=setTimeout(t,200)};o()};window.ScriptLazyLoad||(window.ScriptLazyLoad=new JavaScriptLazyLoad);
;define("wiki-lemma:widget/tools/rightCheck/rightCheck.js",function(e,i,t){var n=e("wiki-common:widget/lib/jquery/jquery.js"),a=e("wiki-common:widget/util/safeCall.js"),o=(e("wiki-common:widget/component/userLogin/userLogin.js"),{editView:{status:null,data:null}});t.exports={editView:function(e,i){var e=e||0,i=i||function(){};if(e)if(o.editView.status)if("PENDING"==o.editView.status)var t=setInterval(function(){"READY"==o.editView.status&&(clearInterval(t),a(i,o.editView.data))},100);else a(i,o.editView.data);else{o.editView.status="PENDING";var t=setInterval(function(){window.baikeInfo&&window.baikeInfo.userLogin&&(clearInterval(t),window.baikeInfo.userLogin.isLogin?n.getJSON("/wikisubmit/api/viewcheck?lemmaId="+e,function(e){o.editView.data=e,o.editView.status="READY",a(i,o.editView.data)}):(o.editView.data={errno:10001},o.editView.status="READY",a(i,o.editView.data)))},100)}},preeditCheck:function(e,i,t,o,d){var e=e||0,i=i||"",t=t||"",o=o||0,d=d||function(){};e&&i&&o&&n.getJSON("/wikisubmit/api/preeditcheck?lemmaId="+e+"&lemmaTitle="+encodeURIComponent(i)+"&lemmaDesc="+encodeURIComponent(t)+"&versionId="+o+"&_="+Math.random(),function(e){a(d,e)})}}});
;define("wiki-lemma:widget/tools/service/service.js",function(e,t,l){var o=e("wiki-common:widget/lib/jquery/jquery.js"),i={};i.Vote={voteCount:0,voted:!1,itemList:[],vote:function(e){i.Vote.voted||o.ajax({url:"http://like.baidu.com/set",dataType:"jsonp",jsonp:"cb",data:{type:0,like:1,pid:3,key:e.lemmaId,r:Math.random()},success:function(e){i.Vote.voted=!0;for(var t=0;t<i.Vote.itemList.length;t++){var l=i.Vote.itemList[t];!!l.handleVotted&&l.handleVotted(e)}}})},getVote:function(e){if(0==i.Vote.voteCount)o.ajax({url:"http://like.baidu.com/get?key="+e.lemmaId+"&type=0&like=1&pid=3&random="+Math.random(),dataType:"jsonp",jsonp:"cb",success:function(e){i.Vote.voteCount=e.count;for(var t=0;t<i.Vote.itemList.length;t++){var l=i.Vote.itemList[t];!!l.handleGotten&&l.handleGotten(e)}}});else for(var t=0;t<i.Vote.itemList.length;t++){var l=i.Vote.itemList[t];!!l.handleGotten&&l.handleGotten({count:data.count})}},regist:function(e){i.Vote.itemList.push(e)}},i.Collect={collected:null,collectTK:"",isGotRequesting:!1,itemList:[],getCollect:function(e){if(null==i.Collect.collected)1!=i.Collect.isGotRequesting&&(i.Collect.isGotRequesting=!0,o.getJSON("/api/usercenter/checkfavorites?lemmaId="+e.newLemmaId,function(e){if(i.Collect.isGotRequesting=!1,0==e.errno){i.Collect.collected=1==e.isFavorite?!0:!1,i.Collect.collectTK=e.tk;for(var t=0;t<i.Collect.itemList.length;t++){var l=i.Collect.itemList[t];!!l.handleGotten&&l.handleGotten(e)}}}));else for(var t=0;t<i.Collect.itemList.length;t++){var l=i.Collect.itemList[t];!!l.handleGotten&&l.handleGotten({has:i.Collect.collected})}},collect:function(e){i.Collect.collected||o.getJSON("/api/usercenter/addfavorites?lemmaId="+e.newLemmaId+"&tk="+i.Collect.collectTK+"&r="+Math.random(),function(e){if(0==e.errno){i.Collect.collected=!0;for(var t=0;t<i.Collect.itemList.length;t++){var l=i.Collect.itemList[t];!!l.handleCollected&&l.handleCollected(e)}}})},cancel:function(e){i.Collect.collected&&o.getJSON("/api/usercenter/delfavorites?lemmaId="+e.newLemmaId+"&tk="+i.Collect.collectTK+"&r="+Math.random(),function(e){if(0==e.errno){i.Collect.collected=!1;for(var t=0;t<i.Collect.itemList.length;t++){var l=i.Collect.itemList[t];!!l.handleCanceled&&l.handleCanceled(e)}}})},regist:function(e){i.Collect.itemList.push(e)}},l.exports=i});
;define("wiki-lemma:widget/tools/announcement/announcement.js",function(n,e,o){var t=n("wiki-common:widget/lib/jquery/jquery.js"),i=n("wiki-common:widget/lib/jsmart/jsmart.js"),a=n("wiki-common:widget/util/cookie.js");o.exports=function(n){"1"!=a.get("home_announcement_hidden")&&n.show&&(t(".header-wrapper .header").append(t(".header .layout").append(new i('<div id="announcement">\n<div class="announcement_content">{%$data.content|f_escape_xml%}</div>\n<div class="announcement_close">X</div>\n</div>').fetch(n))),t("#announcement .announcement_close").click(function(){a.set("home_announcement_hidden","1",{expires:2592e5,path:"/"}),t("#announcement").remove()}))}});
;define("wiki-lemma:widget/tools/rangeExt/rangeExt.js",function(e,n,t){function o(){}function r(e,n){e=e.duplicate(),e.collapse(n);for(var t,o=e.parentElement(),r=o.childNodes,a=-1,i=0;i<r.length;i++){var c=r[i];if(1==c.nodeType){var l=e.duplicate();l.moveToElementText(c);var s=l.compareEndPoints("StartToStart",e),f=l.compareEndPoints("EndToStart",e);if(s>0)break;if(0===s||1===f&&-1===s)return{container:r[i-1],offset:r[i-1].nodeValue.length};if(0===f)return{container:o,offset:i+1};t=l,a=i}}t?t.collapse(!1):(t=e.duplicate(),t.moveToElementText(o),t.collapse(!0)),t.setEndPoint("EndToEnd",e);for(var d=t.text.replace(/(\r\n|\r)/g,"\n").length,g=0,u=a+1;u<r.length&&(g=d,d-=r[u].length,!(0>=d));u++);return 0==d?{container:r[0],offset:r[0].length}:{container:r[u],offset:g}}{var a=e("wiki-common:widget/lib/jquery/jquery.js");e("wiki-lemma:widget/tools/rangeExt/rangeExt.js")}o.prototype={constructor:o};var i=null,c=[];a("body").on("mouseup",function(e){if(window.getSelection){var n=window.getSelection().toString();if(n!==i){i=n;for(var t in c)c[t](e)}}else if(document.selection){var n=document.selection.createRange().text;if(n!==i){i=n;for(var t in c)c[t](e)}}}),t.exports={Rangy:o,onSelectionChange:function(e){c.push(e)},clearSelection:function(){if(window.getSelection&&window.getSelection().removeAllRanges(),document.selection){var e=document.selection.createRange();e.collapse(!0),e.select()}},getSelectionRangy:function(){if(window.getSelection){var e=window.getSelection();if(e.isCollapsed||1!==e.rangeCount)return;if(e.getRangeAt)var n=e.getRangeAt(0);else{var n=document.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset)}var t=new o;return t.startContainer=n.startContainer,t.startOffset=n.startOffset,t.endContainer=n.endContainer,t.endOffset=n.endOffset,t.collapsed=n.collapsed,t.commonAncestorContainer=n.commonAncestorContainer,t}if(document.selection){var e=document.selection.createRange();if(!e||!e.boundingWidth)return;var a=r(e,!0),i=r(e,!1),t=new o;return t.startContainer=a.container,t.startOffset=a.offset,t.endContainer=i.container,t.endOffset=i.offset,t.collapsed=!e.boundingWidth,t.commonAncestorContainer=e.parentElement(),t}}}});
;define("wiki-lemma:widget/tools/label/label.js",function(e,t,n){function o(e){var e=e,t="";do switch(e.nodeType){case 1:var n=a(e),o=e.tagName.toLowerCase()+(n?'[label-module="'+n+'"]':""),r=0;if(n)var d=f("body").find(o);else var d=f(e).parent().children(o);d.each(function(t){f(this).get(0)===e&&(r=t)}),t=o+":eq("+r+") "+t,e=e.parentNode;break;case 3:t=f(e).index()+" "+t,e=e.parentNode;break;default:e=e.parentNode}while(9!==e.nodeType&&!n);return f.trim(t)}function a(e){var e=e;if(1===e.nodeType){var t=e.attributes;for(var n in t)if(t[n].nodeName&&"label-module"==t[n].nodeName.toLowerCase())return t[n].nodeName&&t[n].nodeValue}return!1}function r(e){for(var t=[],e=e;9!==e.nodeType;){var n=a(e);n&&t.push(e),e=e.parentNode}return t.length?t[t.length-1]:null}function d(){return f("<span>").addClass("label-wrap")}function s(e,t,n,o,a){var o=o||0,a=a||0,r=!1,d=!1,s=function(e){if(d)return[];var t=[];if(1===e.nodeType)for(var n in e.childNodes)t=t.concat(arguments.callee(e.childNodes[n]));else 3===e.nodeType&&(e===f&&(d=!0),r&&!d&&(u+=e.nodeValue,t.push(e)),e===c&&(r=!0),r||d||(i+=e.nodeValue.length));return t},l=function(e){if(d)return[];var t=[];if(1===e.nodeType)for(var n in e.childNodes)t=t.concat(arguments.callee(e.childNodes[n],i,p));else 3===e.nodeType&&(b+=e.nodeValue.length,b>=i+p&&(d=!0,f=e,a=e.nodeValue.length-(b-(i+p))),r&&!d&&t.push(e),!r&&b>i&&(r=!0,c=e,o=e.nodeValue.length-(b-i)));return t};if("object"==typeof t){var i=o,u="",c=t,f=n,m=s(e,c,f);return u=c!=f?c.nodeValue.substring(o)+u+f.nodeValue.substring(0,a):c.nodeValue.substring(o,a),{offset:i,length:u.length,text:u,nodeList:m}}var i=t,p=n,b=0,c=null,f=null,m=l(e,i,p);return{startNode:c,endNode:f,startOffset:o,endOffset:a,nodeList:m}}function l(e){if(e instanceof g.Rangy){var t={startNode:e.startContainer||nuill,startOffset:e.startOffset||0,endNode:e.endContainer||null,endOffset:e.endOffset||0};t.commonAncestorNode=1===e.commonAncestorContainer.nodeType?e.commonAncestorContainer:e.commonAncestorContainer.parentNode,o(t.startNode).indexOf("label-module")<0&&(t.errno=11,t.errMsg="该模块无法标注！");for(var n=t.startNode;n.parentNode!=t.commonAncestorNode&&f.inArray(n.parentNode.tagName.toLowerCase(),["a","span","em","strong","i","sup","sub"])<0;)if(n=n.parentNode,f.inArray(t.endNode,f(n).find("*").get())<0){t.errno=12,t.errMsg="无法为跨段落内容标注！";break}if(f.inArray(t.startNode.parentNode,f('[label-wrapper=""]').find("*").get())<0&&(t.errno=1,t.errMsg="非标注区！"),t.errMsg)return t;t.moduleNode=r(t.startNode),t.moduleName=f(t.moduleNode).attr("label-module"),t.modulePath=o(t.moduleNode),t=f.extend(t,s(t.moduleNode,t.startNode,t.endNode,t.startOffset,t.endOffset))}else{var t=e;t=f.extend(t,s(t.moduleNode,t.offset,t.length))}return t}function i(e){var t=[];for(var n in e.nodeList){var o=d();t.push(o),f(e.nodeList[n]).wrap(o)}if(e.startNode!==e.endNode){var a=d();t.push(a);var r=e.startNode.nodeValue.substring(e.startOffset);e.startNode.nodeValue=e.startNode.nodeValue.substring(0,e.startOffset),f(e.startNode).after(a.text(r));var s=d();t.push(s);var r=e.endNode.nodeValue.substring(0,e.endOffset);e.endNode.nodeValue=e.endNode.nodeValue.substring(e.endOffset),f(e.endNode).before(s.text(r))}else{var a=d();t.push(a);var r=e.startNode.nodeValue.substring(e.startOffset,e.endOffset),l=e.startNode.nodeValue.substring(e.endOffset);e.startNode.nodeValue=e.endNode.nodeValue.substring(0,e.startOffset),f(e.startNode).after(f(document.createTextNode(l))).after(a.text(r))}return a.html(a.html().replace(/^(\S)/,'<span class="label-wrap-initial">$1</span>')),[t,a.find(".label-wrap-initial").get(0)]}function u(e,t){var n=i(e),o=n[0],a=n[1],r=f(a).offset(),d=f('<div class="label-path-container">').css({left:r.left-Math.max((document.documentElement.clientWidth-1139)/2,0)+15,top:r.top-5,width:1139-(r.left-Math.max((document.documentElement.clientWidth-1139)/2,0))-30-120});d.append(f("<div>").addClass("label-horizontal")),d.append(f("<div>").addClass("label-block")),d.appendTo(f(".desk-wrapper .layout"));var s=f('<div class="label-comment-container">').css({top:r.top-15}).append(f("<div>").append((t?"":'<a class="delete-comment" href="javascript:;"><em class="cmn-icon cmn-icons cmn-icons_close"></em></a><a class="modify-comment" href="javascript:;"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_pencil"></em></a>')+"<b>-- 批注</b><br/>").append(f("<div>").text(e.comment)));return s.appendTo(f(".desk-wrapper .layout")),g.clearSelection(),[f(o),s]}function c(e,t,n,o){new N({classNames:"label-dialog",content:'<div><div class="dialog-title">'+(t?"修改":"添加")+"批注<br/></div><textarea></textarea></div>",btns:[{text:"确认"},{style:"white",text:"取消"}],onBtnClick:function(n){var a=f(f(this).get(0).node).find("textarea").val();"0"===n&&a&&(t?m(o,[a],window):(e.comment=a,m(w,[f.extend(e,{comment:a}),u(e)],window)))}}).show(),t&&f(".label-dialog textarea").val(n)}var f=e("wiki-common:widget/lib/jquery/jquery.js"),m=e("wiki-common:widget/util/safeCall.js"),p=e("wiki-common:widget/util/browser.js"),b=e("wiki-common:widget/ui/bubble/bubble.js"),N=e("wiki-common:widget/ui/dialog/dialog.js"),g=e("wiki-lemma:widget/tools/rangeExt/rangeExt.js"),h=f("<i>").css({position:"absolute",left:0,top:0,width:0,height:0});h.appendTo(f(".desk-wrapper .layout"));var v=new b({host:h,classNames:"label-bubble",content:"",pos:"topRight",offset:{top:-15,left:30},showTail:!1,hideWhenBlur:!0,animation:"SLIDE"});$bubble=v.getNode();var w="";n.exports={addLabel:function(e,t){var n=g.getSelectionRangy();if(n&&!n.collapsed){var o=l(n);setTimeout(function(){h.css({left:e.clientX-Math.max((document.documentElement.clientWidth-1139)/2,0),top:e.clientY+(p.ie()||p.firefox()?document.documentElement:document.body).scrollTop}),o.errno?o.errno>10&&(v.setContent("<div>"+o.errMsg+"</div>"),v.show()):(v.setContent('<a href="javascript:;" class="cmn-btn-blue cmn-btn-25 add-label">标注</a>'),f(".add-label").on("click",function(){c(o)}),v.show())},200),t&&(w=t)}},modifyLabel:function(e,t){c(null,!0,e,t)},showLabel:function(e,t){var e=l(e);return u(e,t)}}});
;define("wiki-lemma:widget/tools/lazyLoad/lazyLoad.js",function(e,t,A){var r=e("wiki-common:widget/lib/jquery/jquery.js"),a=function(e){e=e||{},e.preloadHeight=e.preloadHeight||0,e.className=e.className||"lazy-img",e.placeHolder=e.placeHolder||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF9fX1AAAA0VQI3QAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==",e.srcAttribute=e.srcAttribute||"data-src";var t=function(){return r(window).scrollTop()+r(window).height()+e.preloadHeight},A=function(){var a=r("img."+e.className);a.attr("src",e.placeHolder);for(var o=t(),i=0;i<a.length;i++)target=a.eq(i),imgSrc=target.attr(e.srcAttribute),target.offset().top<o&&(target.attr("src",imgSrc).removeClass(e.className).removeAttr(e.srcAttribute),!!e.onLazyLoad&&e.onLazyLoad(target));r("img."+e.className).length<=0&&r(window).off("scroll resize",A)},a=function(){r(document).ready(function(){A(),r(window).on("scroll resize",A)})};a()};A.exports=a});
;define("wiki-lemma:widget/tools/marquee/marquee.js",function(t,i,e){function o(t){this.viewport=c(t.viewport),this.btnBox=c(t.btnBox),this.picList=c("ul.maqueeCanvas",this.viewport),this.autoScroll=t.autoScroll||!1,this.stopScroll=!1,this.cloneNode="boolean"==typeof t.cloneNode?t.cloneNode:!1,this.scrollDirection=t.scrollDirection||"HOR";var i=c(">li",this.picList);this.picWidth=i.outerWidth(!0),this.picHeight=i.outerHeight(!0),this.picCount=i.length,this.curFrame=0,this.beforeSwitch=t.beforeSwitch,this.afterSwitch=t.afterSwitch,this.duration=t.duration,this.delay=t.delay;var e=this;this.cloneNode&&c("li",this.picList).clone().appendTo(this.picList),this.btnBox&&this.btnBox.on("click","[frameIndex]",function(){e.stop.call(e),e.switchTo(c(this).attr("frameIndex"))}).on("mouseenter",function(){e.stop.call(e)}).on("mouseleave",function(){e.autoScroll&&e.start.call(e)}),this.viewport.on("mouseenter",function(){e.stop.call(e)}).on("mouseleave",function(){e.autoScroll&&e.start.call(e)})}var c=t("wiki-common:widget/lib/jquery/jquery.js");o.prototype={constructor:o,start:function(){var t=this;t.stopScroll=!1,t.scrollTimer||(t.scrollTimer=setTimeout(function(){t.scrollTimer=null,t.picList.animate("HOR"==t.scrollDirection?{left:"-="+t.picWidth}:{top:"-="+t.picHeight},{duration:t.duration||400,queue:!1,start:function(){t.curFrame=++t.curFrame%t.picCount,c("[frameIndex].cur",t.btnBox).removeClass("cur"),c("[frameIndex]:nth-child("+(t.curFrame+1)+")",t.btnBox).addClass("cur"),t.beforeSwitch&&t.beforeSwitch.call(t,t.curFrame)},complete:function(){t.picList.css("HOR"==t.scrollDirection?{left:-t.curFrame*t.picWidth}:{top:-t.curFrame*t.picHeight}),t.autoScroll&&!t.stopScroll&&t.start.call(t),t.afterSwitch&&t.afterSwitch.call(t,t.curFrame)}})},t.delay||3e3))},stop:function(){clearTimeout(this.scrollTimer),this.scrollTimer=null,this.stopScroll=!0},switchTo:function(t){var i=this;t=Math.max(Math.min(t,i.picCount-1),0),i.picList.animate("HOR"==i.scrollDirection?{left:-t*i.picWidth}:{top:-t*i.picHeight},{duration:i.duration||400,queue:!1,start:function(){i.curFrame=t%i.picCount,c("[frameIndex].cur",i.btnBox).removeClass("cur"),c("[frameIndex]:nth-child("+(i.curFrame+1)+")",i.btnBox).addClass("cur"),i.beforeSwitch&&i.beforeSwitch.call(i,i.curFrame)},complete:function(){i.picList.css("HOR"==i.scrollDirection?{left:-t*i.picWidth}:{top:-t*i.picHeight}),i.afterSwitch&&i.afterSwitch.call(i,i.curFrame)}})}},e.exports=o});
;define("wiki-lemma:widget/tools/newSideShare/qrcode.js",function(t,e,r){var o;!function(){function t(t){this.mode=l.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;r>e;e++){var o=[],n=this.data.charCodeAt(e);n>65536?(o[0]=240|(1835008&n)>>>18,o[1]=128|(258048&n)>>>12,o[2]=128|(4032&n)>>>6,o[3]=128|63&n):n>2048?(o[0]=224|(61440&n)>>>12,o[1]=128|(4032&n)>>>6,o[2]=128|63&n):n>128?(o[0]=192|(1984&n)>>>6,o[1]=128|63&n):o[0]=n,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var o=0;o<t.length-r;o++)this.num[o]=t[o+r]}function n(t,e){this.totalCount=t,this.dataCount=e}function i(){this.buffer=[],this.length=0}function a(){return"undefined"!=typeof CanvasRenderingContext2D}function s(){var t=!1,e=navigator.userAgent;return/android/i.test(e)&&(t=!0,aMat=e.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(t=parseFloat(aMat[1]))),t}function h(t,e){for(var r=1,o=u(t),n=0,i=m.length;i>=n;n++){var a=0;switch(e){case g.L:a=m[n][0];break;case g.M:a=m[n][1];break;case g.Q:a=m[n][2];break;case g.H:a=m[n][3]}if(a>=o)break;r++}if(r>m.length)throw new Error("Too long data");return r}function u(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}t.prototype={getLength:function(){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;r>e;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var r=new t(e);this.dataList.push(r),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,r){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[o][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,r),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},setupPositionProbePattern:function(t,e){for(var r=-1;7>=r;r++)if(!(-1>=t+r||this.moduleCount<=t+r))for(var o=-1;7>=o;o++)-1>=e+o||this.moduleCount<=e+o||(this.modules[t+r][e+o]=r>=0&&6>=r&&(0==o||6==o)||o>=0&&6>=o&&(0==r||6==r)||r>=2&&4>=r&&o>=2&&4>=o?!0:!1)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;8>r;r++){this.makeImpl(!0,r);var o=d.getLostPoint(this);(0==r||t>o)&&(t=o,e=r)}return e},createMovieClip:function(t,e,r){var o=t.createEmptyMovieClip(e,r),n=1;this.make();for(var i=0;i<this.modules.length;i++)for(var a=i*n,s=0;s<this.modules[i].length;s++){var h=s*n,u=this.modules[i][s];u&&(o.beginFill(0,100),o.moveTo(h,a),o.lineTo(h+n,a),o.lineTo(h+n,a+n),o.lineTo(h,a+n),o.endFill())}return o},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=d.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var o=t[e],n=t[r];if(null==this.modules[o][n])for(var i=-2;2>=i;i++)for(var a=-2;2>=a;a++)this.modules[o+i][n+a]=-2==i||2==i||-2==a||2==a||0==i&&0==a?!0:!1}},setupTypeNumber:function(t){for(var e=d.getBCHTypeNumber(this.typeNumber),r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(var r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,o=d.getBCHTypeInfo(r),n=0;15>n;n++){var i=!t&&1==(o>>n&1);6>n?this.modules[n][8]=i:8>n?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(var n=0;15>n;n++){var i=!t&&1==(o>>n&1);8>n?this.modules[8][this.moduleCount-n-1]=i:9>n?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,o=this.moduleCount-1,n=7,i=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[o][a-s]){var h=!1;i<t.length&&(h=1==(t[i]>>>n&1));var u=d.getMask(e,o,a-s);u&&(h=!h),this.modules[o][a-s]=h,n--,-1==n&&(i++,n=7)}if(o+=r,0>o||this.moduleCount<=o){o-=r,r=-r;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,r,o){for(var a=n.getRSBlocks(t,r),s=new i,h=0;h<o.length;h++){var u=o[h];s.put(u.mode,4),s.put(u.getLength(),d.getLengthInBits(u.mode,t)),u.write(s)}for(var l=0,h=0;h<a.length;h++)l+=a[h].dataCount;if(s.getLengthInBits()>8*l)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*l+")");for(s.getLengthInBits()+4<=8*l&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*l)&&(s.put(e.PAD0,8),!(s.getLengthInBits()>=8*l));)s.put(e.PAD1,8);return e.createBytes(s,a)},e.createBytes=function(t,e){for(var o=0,n=0,i=0,a=new Array(e.length),s=new Array(e.length),h=0;h<e.length;h++){var u=e[h].dataCount,l=e[h].totalCount-u;n=Math.max(n,u),i=Math.max(i,l),a[h]=new Array(u);for(var g=0;g<a[h].length;g++)a[h][g]=255&t.buffer[g+o];o+=u;var f=d.getErrorCorrectPolynomial(l),c=new r(a[h],f.getLength()-1),p=c.mod(f);s[h]=new Array(f.getLength()-1);for(var g=0;g<s[h].length;g++){var m=g+p.getLength()-s[h].length;s[h][g]=m>=0?p.get(m):0}}for(var v=0,g=0;g<e.length;g++)v+=e[g].totalCount;for(var _=new Array(v),C=0,g=0;n>g;g++)for(var h=0;h<e.length;h++)g<a[h].length&&(_[C++]=a[h][g]);for(var g=0;i>g;g++)for(var h=0;h<e.length;h++)g<s[h].length&&(_[C++]=s[h][g]);return _};for(var l={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},g={L:1,M:0,Q:3,H:2},f={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;d.getBCHDigit(e)-d.getBCHDigit(d.G15)>=0;)e^=d.G15<<d.getBCHDigit(e)-d.getBCHDigit(d.G15);return(t<<10|e)^d.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;d.getBCHDigit(e)-d.getBCHDigit(d.G18)>=0;)e^=d.G18<<d.getBCHDigit(e)-d.getBCHDigit(d.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return d.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case f.PATTERN000:return(e+r)%2==0;case f.PATTERN001:return e%2==0;case f.PATTERN010:return r%3==0;case f.PATTERN011:return(e+r)%3==0;case f.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case f.PATTERN101:return e*r%2+e*r%3==0;case f.PATTERN110:return(e*r%2+e*r%3)%2==0;case f.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new r([1],0),o=0;t>o;o++)e=e.multiply(new r([1,c.gexp(o)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case l.MODE_NUMBER:return 10;case l.MODE_ALPHA_NUM:return 9;case l.MODE_8BIT_BYTE:return 8;case l.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>e)switch(t){case l.MODE_NUMBER:return 12;case l.MODE_ALPHA_NUM:return 11;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case l.MODE_NUMBER:return 14;case l.MODE_ALPHA_NUM:return 13;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,o=0;e>o;o++)for(var n=0;e>n;n++){for(var i=0,a=t.isDark(o,n),s=-1;1>=s;s++)if(!(0>o+s||o+s>=e))for(var h=-1;1>=h;h++)0>n+h||n+h>=e||(0!=s||0!=h)&&a==t.isDark(o+s,n+h)&&i++;i>5&&(r+=3+i-5)}for(var o=0;e-1>o;o++)for(var n=0;e-1>n;n++){var u=0;t.isDark(o,n)&&u++,t.isDark(o+1,n)&&u++,t.isDark(o,n+1)&&u++,t.isDark(o+1,n+1)&&u++,(0==u||4==u)&&(r+=3)}for(var o=0;e>o;o++)for(var n=0;e-6>n;n++)t.isDark(o,n)&&!t.isDark(o,n+1)&&t.isDark(o,n+2)&&t.isDark(o,n+3)&&t.isDark(o,n+4)&&!t.isDark(o,n+5)&&t.isDark(o,n+6)&&(r+=40);for(var n=0;e>n;n++)for(var o=0;e-6>o;o++)t.isDark(o,n)&&!t.isDark(o+1,n)&&t.isDark(o+2,n)&&t.isDark(o+3,n)&&t.isDark(o+4,n)&&!t.isDark(o+5,n)&&t.isDark(o+6,n)&&(r+=40);for(var l=0,n=0;e>n;n++)for(var o=0;e>o;o++)t.isDark(o,n)&&l++;var g=Math.abs(100*l/e/e-50)/5;return r+=10*g}},c={glog:function(t){if(1>t)throw new Error("glog("+t+")");return c.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return c.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},p=0;8>p;p++)c.EXP_TABLE[p]=1<<p;for(var p=8;256>p;p++)c.EXP_TABLE[p]=c.EXP_TABLE[p-4]^c.EXP_TABLE[p-5]^c.EXP_TABLE[p-6]^c.EXP_TABLE[p-8];for(var p=0;255>p;p++)c.LOG_TABLE[c.EXP_TABLE[p]]=p;r.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),o=0;o<this.getLength();o++)for(var n=0;n<t.getLength();n++)e[o+n]^=c.gexp(c.glog(this.get(o))+c.glog(t.get(n)));return new r(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=c.glog(this.get(0))-c.glog(t.get(0)),o=new Array(this.getLength()),n=0;n<this.getLength();n++)o[n]=this.get(n);for(var n=0;n<t.getLength();n++)o[n]^=c.gexp(c.glog(t.get(n))+e);return new r(o,0).mod(t)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(t,e){var r=n.getRsBlockTable(t,e);if(void 0==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=r.length/3,i=[],a=0;o>a;a++)for(var s=r[3*a+0],h=r[3*a+1],u=r[3*a+2],l=0;s>l;l++)i.push(new n(h,u));return i},n.getRsBlockTable=function(t,e){switch(e){case g.L:return n.RS_BLOCK_TABLE[4*(t-1)+0];case g.M:return n.RS_BLOCK_TABLE[4*(t-1)+1];case g.Q:return n.RS_BLOCK_TABLE[4*(t-1)+2];case g.H:return n.RS_BLOCK_TABLE[4*(t-1)+3];default:return void 0}},i.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;e>r;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],v=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){function e(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg",t);for(var o in e)e.hasOwnProperty(o)&&r.setAttribute(o,e[o]);return r}{var r=this._htOption,o=this._el,n=t.getModuleCount();Math.floor(r.width/n),Math.floor(r.height/n)}this.clear();var i=e("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:r.colorLight});i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.appendChild(i),i.appendChild(e("rect",{fill:r.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;n>a;a++)for(var s=0;n>s;s++)if(t.isDark(a,s)){var h=e("use",{x:String(a),y:String(s)});h.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),i.appendChild(h)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),_="svg"===document.documentElement.tagName.toLowerCase(),C=_?v:a()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function e(t,e){var r=this;if(r._fFail=e,r._fSuccess=t,null===r._bSupportDataURI){var o=document.createElement("img"),n=function(){r._bSupportDataURI=!1,r._fFail&&_fFail.call(r)},i=function(){r._bSupportDataURI=!0,r._fSuccess&&r._fSuccess.call(r)};return o.onabort=n,o.onerror=n,o.onload=i,void(o.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}r._bSupportDataURI===!0&&r._fSuccess?r._fSuccess.call(r):r._bSupportDataURI===!1&&r._fFail&&r._fFail.call(r)}if(this._android&&this._android<=2.1){var r=1/window.devicePixelRatio,o=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,e,n,i,a,s,h,u){if("nodeName"in t&&/img/i.test(t.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*r;else"undefined"==typeof u&&(arguments[1]*=r,arguments[2]*=r,arguments[3]*=r,arguments[4]*=r);o.apply(this,arguments)}}var n=function(t,e){this._bIsPainted=!1,this._android=s(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return n.prototype.draw=function(t){var e=this._elImage,r=this._oContext,o=this._htOption,n=t.getModuleCount(),i=o.width/n,a=o.height/n,s=Math.round(i),h=Math.round(a);e.style.display="none",this.clear();for(var u=0;n>u;u++)for(var l=0;n>l;l++){var g=t.isDark(u,l),f=l*i,d=u*a;r.strokeStyle=g?o.colorDark:o.colorLight,r.lineWidth=1,r.fillStyle=g?o.colorDark:o.colorLight,r.fillRect(f,d,i,a),r.strokeRect(Math.floor(f)+.5,Math.floor(d)+.5,s,h),r.strokeRect(Math.ceil(f)-.5,Math.ceil(d)-.5,s,h)}this._bIsPainted=!0},n.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t)},n.prototype.isPainted=function(){return this._bIsPainted},n.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},n.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},n}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,r=this._el,o=t.getModuleCount(),n=Math.floor(e.width/o),i=Math.floor(e.height/o),a=['<table style="border:0;border-collapse:collapse;">'],s=0;o>s;s++){a.push("<tr>");for(var h=0;o>h;h++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+n+"px;height:"+i+"px;background-color:"+(t.isDark(s,h)?e.colorDark:e.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),r.innerHTML=a.join("");var u=r.childNodes[0],l=(e.width-u.offsetWidth)/2,g=(e.height-u.offsetHeight)/2;l>0&&g>0&&(u.style.margin=g+"px "+l+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();o=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:g.H},"string"==typeof e&&(e={text:e}),e)for(var r in e)this._htOption[r]=e[r];"string"==typeof t&&(t=document.getElementById(t)),this._android=s(),this._el=t,this._oQRCode=null,this._oDrawing=new C(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},o.prototype.makeCode=function(t){this._oQRCode=new e(h(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},o.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},o.prototype.clear=function(){this._oDrawing.clear()},o.CorrectLevel=g}(),r.exports=o});
;define("wiki-lemma:widget/tools/newSideShare/sideShare.js",function(e,n,i){var o=(e("wiki-common:widget/lib/jquery/jquery.js"),{});o.initBaikeShare=function(e,n,i,o,t,a){var c;o=encodeURIComponent(o),i=encodeURIComponent(i),t=encodeURIComponent(t),a=encodeURIComponent(a);var r="",s="",m="【"+n+"_百度百科】"+i,p="【"+n+"_百度百科】";switch(""!==t&&(r="&pic="+t),""!==a&&(s="&pics="+a),e){case"weibo":c="http://v.t.sina.com.cn/share/share.php?url="+o+"&title="+m+r+"&appkey=936491597";break;case"Qzone":c="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+o+"&title="+p+s+"&summary="+i;break;case"qq":c="http://connect.qq.com/widget/shareqq/index.html?url="+o+"&title="+p+s+"&summary="+i}window.open(c)},i.exports=o});
;define("wiki-lemma:widget/tools/newSideShare/taskSideShare.js",function(e,a,r){var i=e("wiki-lemma:widget/tools/newSideShare/sideShare.js"),c=e("wiki-lemma:widget/tools/newSideShare/qrcode.js"),t=(e("wiki-common:widget/component/nslog/nslog.js"),{init:function(e){var a=this;a.param=e,a.param.url=a.param.url||window.location.href,a.param.pic=a.param.pic||"http://baike.bdimg.com/cms/static/baike.png",a.param.qqPic=a.param.qqPic||"http://baike.bdimg.com/cms/static/baike.png",a.param.title=a.param.title||$("title").html(),a.param.desc=a.param.desc.length>80?a.param.desc.substr(0,80)+"...":a.param.desc,a.shareEvent()},shareEvent:function(){var e=window.location.href,a=e.indexOf("share_fr=pc_");if(a>-1)var e=e.replace(/\??\&?share\_fr\=pc\_[a-z]+/g,"");var r=e.indexOf("?");if(-1!=r)var t=[e+"&share_fr=pc_sina",e+"&share_fr=pc_qq",e+"&share_fr=pc_qzone"];else var t=[e+"?share_fr=pc_sina",e+"?share_fr=pc_qq",e+"?share_fr=pc_qzone"];var n=this,s=!0;$("#side-share").on("click",".bds_wechat",function(){if(s){var a=new c(document.getElementById("wechat-qrcode-img"),{width:180,height:180}),r=e.indexOf("?");if(r>-1)var i=e+"&share_fr=pc_qrcode";else var i=e+"?share_fr=pc_qrcode";a.makeCode(i),s=!1}$(".qrcode-wrapper").show()}),$(".qrcode-wrapper .cmn-icons_close").click(function(){$(".qrcode-wrapper").hide()}),$("#side-share").on("click",".bds_tsina",function(e){e.preventDefault();var a=t[0];i.initBaikeShare("weibo",n.param.title,n.param.desc,a,n.param.pic)}),$("#side-share").on("click",".bds_qzone",function(e){e.preventDefault();var a=t[2];i.initBaikeShare("Qzone",n.param.title,n.param.desc,a,n.param.pic,n.param.qqPic)}),$("#side-share").on("click",".bds_tqq",function(e){e.preventDefault();var a=t[1];i.initBaikeShare("qq",n.param.title,n.param.desc,a,n.param.pic,n.param.qqPic)})}});r.exports=t});
;define("wiki-lemma:widget/tools/praise/praise.js",function(o,n,e){var i=o("wiki-common:widget/lib/jquery/jquery.js"),t=o("wiki-common:widget/component/userLogin/userLogin.js");e.exports={init:function(o){function n(){return e?(alert("亲，你已经赞过啦"),!1):void i.getJSON("/platform/api/vote",{id:o.lemmaId},function(o){0===o.errno?(s.html(o.score),c.html("已赞").css("color","#999"),r.css("cursor","default"),e=!0):console&&console.log(o.errno)})}var e=!1,r=i("#figurePraise"),c=r.find(".txt"),s=r.find(".count");i.getJSON("/platform/api/getvote",{id:o.lemmaId,category:o.category},function(o){0===o.errno?s.html(o.score):console&&console.log(o.errno)}),r.on("click",function(){t.checkIfLogin({onLogon:n,onUnlogin:function(){t.showLoginPop()}})})}}});
;define("wiki-lemma:widget/tools/searchHeader/toolButtons/toolButtons.js",function(o,t,e){var n=o("wiki-common:widget/lib/jquery/jquery.js"),l=o("wiki-common:widget/component/userLogin/userLogin.js"),c=o("wiki-lemma:widget/tools/service/service.js"),i=n(".toolButtons-collect"),s=(n(".toolButtons-edit"),n(".toolButtons-vote")),a=function(){i.addClass("collected")},d=function(){i.removeClass("collected")},u=function(o){s.addClass("voted").text(o),s.off("click")},r=function(o){i.on("click",function(){var t=n(this);l.checkIfLogin({onLogin:function(){t.hasClass("collected")?c.Collect.cancel(o):c.Collect.collect(o)},onUnlogin:function(){l.showLoginPop()}})}),c.Collect.regist({handleCollected:a,handleCanceled:d,handleGotten:function(o){!!o.isFavorite&&a()}}),s.on("click",function(){var t=n(this);!t.hasClass("voted")&&c.Vote.vote(o)}),c.Vote.regist({handleVotted:function(o){u(o.count)}}),c.Vote.getVote(o),l.regist({handleLogon:function(){c.Collect.getCollect(o)}})};e.exports=r});
;define("wiki-lemma:widget/tools/searchHeader/toolButtons/userInfo.js",function(n,o,e){var i=n("wiki-common:widget/lib/jquery/jquery.js"),t=n("wiki-common:widget/component/userLogin/userLogin.js"),r=function(){var n=i(".lemmaWgt-searchHeader .user-link");t.checkIfLogin({onLogin:function(o){n.attr("href","/usercenter").text(o.name),window.baikeInfo=window.baikeInfo||{},window.baikeInfo.userLogin=o},onUnlogin:function(){window.baikeInfo=window.baikeInfo||{},window.baikeInfo.userLogin={errno:0,isLogin:!1},n.on("click",function(){t.showLoginPop()})}}),t.regist({handleLogon:function(o){n.attr("href","/usercenter").text(o.name)}})};e.exports=r});
;define("wiki-lemma:widget/tools/tool/tool.js",function(e,o,t){var n=e("wiki-common:widget/lib/jquery/jquery.js"),a={};a.callByBrowser=function(e,o){var t,a=this.url,i=document.createElement("SCRIPT"),l=0,r=o||{},d=(r.charset,e||function(){}),u=r.timeOut||0;i.onload=i.onreadystatechange=function(){if(!l){var e=i.readyState;if("undefined"==typeof e||"loaded"==e||"complete"==e){l=1;try{d(),clearTimeout(t)}finally{i.onload=i.onreadystatechange=null,n(i).remove()}}}},u&&(t=setTimeout(function(){i.onload=i.onreadystatechange=null,n(i).remove(),r.onfailure&&r.onfailure()},u)),n(i).attr("src",a).appendTo(document.body)},t.exports=a});
;define("wiki-lemma:widget/tools/video/flashVideo/flashVideo.js",function(e,o,i){var t=e("wiki-common:widget/lib/jquery/jquery.js"),s=e("wiki-common:widget/lib/swfObject/swfObject.js"),a=function(e,o,i,n){var d="http://www.macromedia.com/go/getflashplayer",l="j-flash-video"+a.count,c="j-flash-video-placeholder"+a.count;a.count++,options=t.extend({width:0,height:0,src:"",target:null,className:""},e||{}),n=t.extend({},n||{}),o=t.extend({allowscriptaccess:"always",wmode:"Opaque",allowfullscreen:"true"},o||{}),i=t.extend({"class":"flash-video j-flash-video "+options.className,id:l},i||{}),this.load=function(){options.target.append(t("<div id='"+c+"'></div>")),s.embedSWF(options.src,c,options.width,options.height,10,d,n,o,i)},this.remove=function(){t("#"+l).remove()}};a.count=0,i.exports=a});
;define("wiki-lemma:widget/tools/video/iframeVideo/iframeVideo.js",function(e,i,o){var r=e("wiki-common:widget/lib/jquery/jquery.js"),t=function(e){var i='<iframe frameborder="0" scrolling="no"></iframe>',o=r(".j-iframe-video-cover"),t=r.extend({src:"",width:0,height:0,coverUrl:null,target:null},e),d=null,o=r('<div class="iframe-video-cover"></div>');this.load=function(){d=r(i),d.css({width:t.width,height:t.height}),o.css({width:t.width,height:t.height,background:"url("+t.coverUrl+") no-repeat 0px 0px",position:"absolute","z-index":"1"}),d.bind("load",function(){o.hide()}),o.appendTo(t.target),d.attr("src",t.src),d.appendTo(t.target)},this.remove=function(){d.remove(),o.remove()}};o.exports=t});
;define("wiki-lemma:widget/tools/video/iqiyiVideo/iqiyiVideo.js",function(i,e,o){var t=i("wiki-common:widget/lib/jquery/jquery.js"),a=i("wiki-lemma:widget/tools/video/flashVideo/flashVideo.js"),n=function(i){function e(){window.notice=function(i){if(i="string"==t.type(i)?t.parseJSON(i):i,"playStateChange"==i.type)switch(i.data.state){case"Playing":!!o&&o.hide();break;case"Stoped":}}}var o=i.cover,n=this,s=!1;o&&o.length>0&&(i.src=i.src+"&autoPlay=1",e(),o.click(function(){i.videoCount>1&&e(),s||(n.load(),t(o).find(".svm-cover-button").addClass("svm-loding"),s=!0)})),a.call(this,i)};n.count=0,o.exports=n});
;define("wiki-lemma:widget/tools/video/pageMask/pageMask.js",function(i,n,e){var t=i("wiki-common:widget/lib/jquery/jquery.js"),d=function(){var i='<div class="page-mask j-page-mask" style="display:none" id="dvPageMask"></div>',n=null,e=this,d=function(){return n||(n=t(i),n.appendTo(t(document.body))),n},o=function(){},s=function(){},a=function(){e.hide()};this.enableClickHide=function(){d().bind("click",a)},this.disableClickHide=function(){d().unbind("click",a)},this.display=function(){d().show(),s()},this.hide=function(){d().hide(),o()}};e.exports=new d});
;define("wiki-lemma:widget/tools/video/video.js",function(i,e,o){var l=i("wiki-lemma:widget/tools/video/iframeVideo/iframeVideo.js"),t=i("wiki-lemma:widget/tools/video/iqiyiVideo/iqiyiVideo.js"),d=i("wiki-lemma:widget/tools/video/flashVideo/flashVideo.js"),s=function(i){i.type;"iqiyi"==i.type?t.call(this,i):"flash"==i.type?d.call(this,i):l.call(this,i)};o.exports=s});
;define("wiki-lemma:widget/basicElement/addSub/addSub.js",function(e,i,a){function t(e){this.dialog=new s({classNames:"add-sub-dialog",title:'添加义项描述<a href="http://baike.baidu.com/view/10811633.htm" target="_blank">义项命名规则</a>',content:'<div class="add-sub">                        <div class="content-inner">                            <div class="tip">您需要给原有的义项和新增加的义项都写一个“义项描述”，让读者能分清楚同名的两个事物。</div>                            <div class="example">                                <div class="example-tit">示例</div>                                <div class="example-show">                                    <ul>                                        <li class="show-li clearfix"><div class="tit">词条名</div><div class="content">环太平洋</div></li>                                        <li class="show-li clearfix"><div class="tit">原有义项描述</div><div class="content">地理区域</div></li>                                        <li class="show-li clearfix"><div class="tit">新增义项描述</div><div class="content">2013年美国科幻电影</div></li>                                    </ul>                                </div>                            </div>                            <form action="/createsub/'+e+'" method="get">                                <div class="form-item name-lemma clearfix"><label for="">词条名</label><input type="text" value="'+e+'" disabled="disabled"></div>                                <div class="form-item clearfix"><label for="">原有义项描述(不大于20字)</label><input type="text" value="" name="ori_desc"></div>                                <div class="form-item clearfix"><label for="">新增义项描述(不大于20字)</label><input type="text" value="" name="desc"></div>                                <div class="form-item form-notice"><strong>[注意]</strong>如果原义项中已经罗列了多个义项的内容，那么建议您不要直接添加义项，而是<a href="http://tieba.baidu.com/p/4152042379" target="_blank">报告未拆分多义词。</a></div>                                <div class="add-sub-main-footer"><input type="submit" class="add-sub-main-button add-sub-main-accept" value="确定"><span class="add-sub-main-button add-sub-main-cancel">取消</span></div>                            </form>                        </div>                    </div>'}),this.show=function(){this.dialog.show()},this.close=function(){this.dialog.hide()},this.close();var i=this;l(document.body).on("click",".add-sub-close",function(){i.close()}),l(document.body).on("click",".add-sub-main-cancel",function(){i.close()}),l(document.body).on("click",".add-sub-main-accept",function(e){var i=l('.add-sub input[name="ori_desc"]'),a=l('.add-sub input[name="desc"]'),t=l(".add-sub .name-lemma input").val(),s=l.trim(i.val()),d=l.trim(a.val()),n=!0;return s?d?s.length>20||d.length>20?(alert("义项名不能超过20字!"),n=!1):s===d?(alert("原有义项描述和新义项描述不能一致!"),n=!1):t===s?(alert("原义项描述不能等于词条名!"),n=!1):t===d&&(alert("新义项描述不能等于词条名!"),n=!1):(alert("未输入新义项描述!"),n=!1):(alert("未输入原义项描述!"),n=!1),n?(s=s.replace(/\n\r\t/gi,""),d=d.replace(/\n\r\t/gi,""),i.attr("value",s),void a.attr("value",d)):(e.preventDefault(),!1)})}var l=e("wiki-common:widget/lib/jquery/jquery.js"),s=e("wiki-common:widget/ui/dialog/dialog.js"),d=e("wiki-common:widget/component/userLogin/userLogin.js"),n=e("wiki-lemma:widget/tools/rightCheck/rightCheck.js"),c=e("wiki-common:widget/component/unameFiller/unameFiller.js"),o=function(e){var e=e,i=e.lemmaId||0,a=e.lemmaTitle||"",o=e.lemmaDesc||"",r=e.versionId||0,m=e.subLemmaId||0,u=new t(a);l(document.body).on("click",".add-sub-icon, .lemmaWgt-lemmaTitle .add-subLemma",function(){n.preeditCheck(i,a,o,r,function(e){if(0==m)return void(window.location.href="/createsub/"+encodeURIComponent(a));if(e.errno)switch(e.errno){case 100001:d.showLoginPop();break;case 100006:c.show();break;case 100005:alert("对不起，您目前被封禁");break;case 110001:alert("对不起，该词条被锁定");break;case 110007:alert("对不起，消歧页无法编辑");break;case 110005:case 110008:s.alert({title:"添加义项",subMsg:"对不起，您暂时没有权限为该词条添加义项。"});break;case 470001:alert("系统错误，请刷新重试")}else{if(!e.data.right.noAudit)return void s.alert({title:"编辑提示",subMsg:"很抱歉，该词条有其他用户编辑的版本正在提交，您暂时无法添加义项。<br/>百科建议您晚些时候再尝试添加义项，或者尝试编辑其他的词条。"});u.show()}})})};a.exports=o});
;define("wiki-lemma:widget/basicElement/collect/collect.js",function(e,o,t){var c=e("wiki-common:widget/lib/jquery/jquery.js"),n=e("wiki-common:widget/component/userLogin/userLogin.js"),l=e("wiki-lemma:widget/tools/service/service.js"),i=c(".top-collect"),s=c(".collect-text"),u=c(".collect-tip"),a=!1,d=null,m=function(){i.addClass("collected"),s.text("已收藏"),a=!0},r=function(){i.removeClass("collected"),s.text("收藏"),a=!1},f=function(){d&&clearTimeout(d),d=setTimeout(function(){u.hide()},300)},g=function(){a&&(d&&clearTimeout(d),u.show())};t.exports=function(e){i.on("click",function(){n.checkIfLogin({onLogin:function(){i.hasClass("collected")?l.Collect.cancel(e):l.Collect.collect(e)},onUnlogin:function(){n.showLoginPop()}})}),i.on("mouseover",g).on("mouseout",f),n.regist({handleLogon:function(){l.Collect.getCollect(e)}}),l.Collect.regist({handleCollected:m,handleCanceled:r,handleGotten:function(e){!!e.isFavorite&&m()}})}});
;define("wiki-lemma:widget/basicElement/commonModulePager/commonModulePager.js",function(e,i,a){var s=e("wiki-common:widget/lib/jquery/jquery.js"),l=function(e){var i=e,a=0,l=i.pageNumber,n=i.container,d=n.find(".cmp-prev"),t=n.find(".cmp-next"),c=n.find(".cmp-default"),o=n.find(".cmp-all"),f=this;this.prev=function(){this.skipTo(a-1)},this.next=function(){this.skipTo(a+1)},this.skipTo=function(e){if(!(e>l||0>=e)){a=e;var s=n.find(".cmp-index");s.removeClass("selected"),n.find("[data-index='"+e+"']").addClass("selected"),d.removeClass("disabled"),t.removeClass("disabled"),1==e&&d.addClass("disabled"),e==l&&t.addClass("disabled"),!!i.handlePageChange&&i.handlePageChange(e)}},this.displayDefault=function(){return c.hasClass("selected")?void this.skipTo(a):(n.find(".cmp-page").show(),o.removeClass("selected"),c.addClass("selected"),void(!!i.handleDisplayDefault&&i.handleDisplayDefault()))},this.displayAll=function(){o.hasClass("selected")||(n.find(".cmp-page").hide(),c.removeClass("selected"),o.addClass("selected"),!!i.handleDisplayAll&&i.handleDisplayAll())};var p=function(){a=1,d.on("click",function(){f.prev()}),t.on("click",function(){f.next()}),o.on("click",function(){f.displayAll()}),c.on("click",function(){f.displayDefault()}),n.find(".cmp-index").on("click",function(){var e=parseInt(s(this).attr("data-index"));f.skipTo(e)}),f.displayDefault()};p()};a.exports=l});
;define("wiki-lemma:widget/basicElement/modulePager/modulePager.js",function(a,e,n){var s=a("wiki-common:widget/lib/jquery/jquery.js");n.exports=function(a){var e={total:0,handleNext:null,handlePrev:null};s.extend(e,a);var n=['<div class="module-pager">','<span><em class="index">1</em>/',e.total,"</span>",'<a href="javascript:;" class="pTag prev disabled">','<em class="cmn-icon cmn-icons cmn-icons_arrow-l-2"></em></a>','<a href="javascript:;" class="pTag next">','<em class="cmn-icon cmn-icons cmn-icons_arrow-r-2"></em></a>',"</div>"].join("");1===e.total&&(n="");var i=1,l=s(n),t=l.find(".index"),d=l.find(".next"),o=l.find(".prev"),c=this,r=function(){1>=i?o.addClass("disabled"):o.removeClass("disabled"),i>=e.total?d.addClass("disabled"):d.removeClass("disabled"),e.total<=1&&(d.addClass("disabled"),o.addClass("disabled"))},m=function(){l.on("click",function(a){var e=s(a.target);e.hasClass("cmn-icon")&&(e=e.parent()),e.hasClass("next")?c.next():e.hasClass("prev")&&c.prev()})};this.next=function(){i>=e.total||(t.text(++i),r(),!!e.handleNext&&e.handleNext(i))},this.prev=function(){1>=i||(t.text(--i),r(),!!e.handlePrev&&e.handlePrev(i))},this.appendTo=function(a){l.appendTo(a),m()},r()}});
;define("wiki-lemma:widget/basicElement/pinyin/fmp.js",function(t,e,a){var i=!1;try{i=external.max_version}catch(n){}Utils={g:function(t){return document.getElementById(t)},f:function(t){this.g(t.cid).innerHTML=this.fm(this.b.isIE?'<object id="#{id}" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="#{width}" height="#{height}" align="#{align}"><param name="movie" value="#{movie}" /><param name="allowScriptAccess" value="#{allowScriptAccess}" /><param name="allowNetworking" value="#{allowNetworking}" /><param name="flashVars" value="#{flashVars}" /><param name="wmode" value="#{wmode}" /><param name="scale" value="#{scale}" /><param name="salign" value="#{salign}" /></object>':'<embed id="#{id}" src="#{movie}" allowScriptAccess="#{allowScriptAccess}" allowNetworking="#{allowNetworking}" flashVars="#{flashVars}" width="#{width}" height="#{height}" align="#{align}" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" wmode="#{wmode}" scale="#{scale}" salign="#{salign}" />',t)},fm:function(t,e){if(arguments.length)if("object"==typeof e)t=t.replace(/#\{([^\{\}]+)\}/g,function(t,a){var i=e[a];return"function"==typeof i&&(i=i(a)),"undefined"==typeof i?"":i});else if("undefined"!=typeof e)for(var a=arguments.length-2;a>-1;a--)t=t.replace(new RegExp("#\\{"+a+"\\}","g"),arguments[a+1]);return t},b:{isIE:/msie/i.test(navigator.userAgent),isFF:/firefox/i.test(navigator.userAgent),isMaxthon:i},mo:function(){for(var t={},e=arguments.length,a=0;e>a;a++){var i=arguments[a];for(var n in i)null==t[n]&&(t[n]=arguments[a][n])}return t}},FMP={g:Utils.g,f:Utils.f,b:Utils.b,fm:Utils.fm,_flash:null,loaded:!1,cfg:{cid:"fmp_flash_div",id:"fmp_flash",width:100,height:100,align:"middle",movie:"flash/fmp.swf?v=090105a",allowScriptAccess:"always",allowNetworking:"all",salign:"lt",wmode:"window",scale:"noscale",flashVars:"_instanceName=FMP"},load:function(){this.b.isMaxthon&&(this.cfg.movie+="&r="+Math.random()),this.f(this.cfg)},getUrl:function(){this._flash._getVar("url")},setUrl:function(t){this._flash._setVar("url",t)},getVolume:function(){return 100*this._flash._getVar("volume")},setVolume:function(t){this._flash._setVar("volume",t/100)},getMute:function(){this._flash._getVar("mute")},setMute:function(t){this._flash._setVar("mute",t)},getCurrentPosition:function(){return this._flash._getVar("currentPosition")/1e3},setCurrentPosition:function(t){this._flash._setVar("currentPosition",1e3*t)},getDuration:function(){return this._flash._getVar("duration")/1e3},getDownloadProgress:function(){return 100*this._flash._getVar("downloadProgress")},play:function(){this._flash._play()},pause:function(){this._flash._pause()},stop:function(){this._flash._stop()},_onLoad:function(){this.loaded=!0,this._flash=this.g(this.cfg.id),this.onLoad&&this.onLoad()},_onPlayStateChange:function(t){this.onPlayStateChange&&this.onPlayStateChange(t)}},a.exports=FMP});
;define("wiki-lemma:widget/basicElement/pinyin/lemmaPinyin.js",function(i,e,t){var n=i("wiki-common:widget/lib/jquery/jquery.js"),a=i("wiki-lemma:widget/basicElement/pinyin/fmp.js"),o={};o.play=function(i){var e=i.lemmaTitle,t=i.pinyin,n=t.replace(/,|，/g," , ").replace(/\s+/g," ").split(" "),o=-1,l=e.replace(/\S/g,function(i){return o++,i+"("+n[o]+")"}),c="http://tts.baidu.com/text2audio?tex="+encodeURIComponent(l)+"&cuid=baike&lan=ZH&ctp=1&pdt=31&vol=9&spd=4";a.cfg.movie="http://dict.baidu.com/static/flash/fmp.swf?v=090105a",window.FMPLoaded||(a.load(),window.FMPLoaded=!0);try{a.loaded?(a.stop(),a.setUrl(c),a.setVolume(100),a.play()):a.onLoad=function(){a.setUrl(c),a.setVolume(100),a.play()}}catch(p){}};var l=function(i){n("#j-pinyin-speak").on("click",function(){o.play(i)})};t.exports=l});
;define("wiki-lemma:widget/basicElement/slidePager/slidePager.js",function(e,i,a){var s=e("wiki-common:widget/lib/jquery/jquery.js"),d=function(e){var i=e,a=['<div class="slide-pager">','<a class="slidePager-prev disabled"></a>','<ul class="slidePager-list">',"</ul>",'<a class="slidePager-next"></a>',"</div>"].join(""),d=s(a),l=0,n=d.find(".slidePager-list"),t=this,r=function(e){return s('<li class="slidePager-item" data-index="'+e+'">●</li>')};this.prev=function(){this.skipTo(l-1)},this.next=function(){this.skipTo(l+1)},this.skipTo=function(e){if(!(0>e||e>=i.total)){l=e,d.find("li").removeClass("selected"),d.find("[data-index='"+e+"']").addClass("selected"),!!i.handlePageChange&&i.handlePageChange(e);var a=d.find(".slidePager-prev"),s=d.find(".slidePager-next");a.removeClass("disabled"),s.removeClass("disabled"),0==l?a.addClass("disabled"):l+1==i.total&&s.addClass("disabled")}};var o=function(){l=0,d.on("click",".slidePager-prev",function(){t.prev()}),d.on("click",".slidePager-next",function(){t.next()}),d.on("click",".slidePager-list li",function(){var e=parseInt(s(this).attr("data-index"));t.skipTo(e)});for(var e=0;e<i.total;e++){var a=r(e);a.appendTo(n),0==e&&a.addClass("selected")}};this.appendTo=function(e){d.appendTo(e)},o()};a.exports=d});
;define("wiki-lemma:widget/basicElement/vote/vote.js",function(t,e,o){var n=t("wiki-common:widget/lib/jquery/jquery.js"),i=t("wiki-lemma:widget/tools/service/service.js"),s=function(t,e){var o=n("#j-topShareCount"),i=o.length>0?parseInt(o.text()):0,s={0:.1,1:.15,2:.2,3:.25,4:.3,5:.35,6:.4};i=t&&""!=t?parseInt(s[parseInt(t)%7]*e)+i:parseInt(.3*e)+i,o.text(i)},a=function(t){t.lemmaId;i.Vote.regist({handleGotten:function(e){n(".top-vote .vote-count").text(e.count),setTimeout(function(){s(t.subLemmaId,e.count)},2e3)},handleVotted:function(){n(".top-vote").addClass("voted")}}),n(".vote-tip").on("click",function(){i.Vote.vote(t)}),i.Vote.getVote(t)};o.exports=a});
;define("wiki-lemma:widget/lemma_content/mainContent/albumList/albumList.js",function(t,e,a){var i=t("wiki-common:widget/lib/jquery/jquery.js"),n=t("wiki-lemma:widget/basicElement/modulePager/modulePager.js"),r=t("wiki-lemma:widget/lemma_content/commonModule/album/album.js"),o=function(t){return String(t).replace(/[^\x00-\xff]/g,"ci").length},l=function(t,e,a){var t=String(t),a=a||"";return 0>e||o(t)<=e?t+a:(t=t.substr(0,e).replace(/([^\x00-\xff])/g,"$1 ").substr(0,e).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1"),t+a)},d=function(t,e){var a=o(t);return a>e?l(t,e-4)+"...":t},c=function(t){var e={};i.extend(e,t);var a=i(".album-list .list"),o=i(".album-list .scroller"),l=0,c=1,f=790,u=null,h=0,m=[],s=function(){var t=0;for(var a in e.data)e.data[a].albumId=a,e.data[a].index=t,t++,m.push(e.data[a])},v=function(t){var a={linkUrl:"/pic/"+encodeURIComponent(e.lemmaTitle)+"/"+e.newLemmaId+"/"+t.albumId+"/"+t.coverpic+"?fr=lemma",description:d(t.desc,18),coverUrl:t.coverurl,total:t.total,coverWidth:t.coverWidth,coverHeight:t.coverHeight,width:t.width>218?218:t.width,height:155},i=r.render(a);return i},g=function(t){var e=new Image;e.onload=function(){t.height=155,t.width=e.width*t.height/e.height,t.coverWidth=t.width,t.coverHeight=t.height;var i=h;h=i+15+t.width;var n=v(t);n.attr("nslog-type","1204"),a.width(h+15),a.append(n),0==t.index?n.attr("data-index",0):i-Math.floor(i/f+1)*f<=0&&h-Math.floor(i/f+1)*f>0&&n.attr("data-index",Math.floor(h/f)),t.index+1<m.length?g(m[t.index+1]):(n.addClass("last"),w())},e.src=t.coverurl},w=function(){var t=a.width(),e=t/f;l=Math.floor(e)+(Math.floor(e)<e?1:0),u=new n({total:l,handleNext:function(){l>c&&c++,x(c)},handlePrev:function(){c>1&&c--,x(c)}}),u.appendTo(i(".album-list .footer"))};this.load=function(){g(m[0])};var x=function(t){var e=a.find('[data-index="'+(t-1)+'"]'),i=e.offset().left-a.offset().left;o.animate({scrollLeft:i},500)};s()};a.exports=c});
;define("wiki-lemma:widget/lemma_content/mainContent/basicInfo/basicInfo.js",function(i,t,a){var e=i("wiki-common:widget/lib/jquery/jquery.js");a.exports=function(){e(".basic-info").on("click",".basicInfo-block .toggle",function(i){var t=e(i.target);if(t=t.hasClass("toggle")?t:t.parents(".toggle").length>0?t.parents(".toExpand"):null)if(t.hasClass("toExpand")){var a=t.parents(".basicInfo-item"),n=a.find(".basicInfo-overlap");n.data("height")||n.data("height",n.height()-1),n.css({visibility:"visible",height:a.height()}),n.animate({height:n.data("height")},300)}else if(t.hasClass("toCollapse")){var n=t.parents(".basicInfo-overlap"),a=n.parent();n.animate({height:a.height()},300,function(){n.css("visibility","hidden")})}})}});
;define("wiki-lemma:widget/lemma_content/mainContent/lemmaReference/lemmaReference.js",function(e,n,a){var t=e("wiki-common:widget/lib/jquery/jquery.js"),o=e("wiki-common:widget/component/nslog/nslog.js"),s=function(e){var n=e,a=t(".lemma-reference"),s=(a.find(".reference-list-wrap"),a.find(".reference-list")),i=a.find(".toggle"),r=this;this.toggle=function(){a.hasClass("expand")?this.collapse():this.expand()},this.collapse=function(){a.removeClass("expand").addClass("collapse")},this.expand=function(){a.addClass("expand").removeClass("collapse")},this.focusItem=function(e){s.find("li").removeClass("focus");for(var a=0;a<e.length;a++){var o=t("[id='reference-["+e[a]+"]-"+n.subLemmaId+"-wrap']");o.addClass("focus"),e[a]>10&&r.expand()}var i="reference-["+e[0]+"]-"+n.subLemmaId+"-wrap";window.location.hash=i};var c=function(e){var n=e.text().replace("[","").replace("]","");n=n.split("-");for(var a=parseInt(n[0]),t=parseInt(n[n.length-1]),o=[],s=a;t>=s;s++)o.push(s);return o},l=function(){i.on("click",function(){r.toggle()}),t(document.body).on("click","sup",function(e){var n=t(e.target),a=c(n);r.focusItem(a),o(1970)}),t(document).ready(function(){var e=window.location.hash,n=/#reference-\[(\d+)\]-\d+-wrap/i,a=e.match(n),t=a&&a.length>=2?parseInt(a[1]):-1;t>0&&r.focusItem([t])})};l()};a.exports=s});
;define("wiki-lemma:widget/lemma_content/mainContent/lemmaStatistics/lemmaStatistics.js",function(e,t,a){function i(e){if(!e)return"";var t=e.match(/(\d{2,4})-(\d{1,2})-(\d{1,2})/);t[2]=parseInt(t[2],10)-1;var a=new Date(t[1],t[2],t[3]),i=new Date,n=new Date(i.getFullYear(),i.getMonth(),i.getDate()-1),r=parseInt((a-n)/864e5);switch(r){case 1:return"今天";case 0:return"昨天";case-1:return"2天前";case-2:return"3天前"}return e}var n=e("wiki-common:widget/lib/jquery/jquery.js"),r=e("wiki-common:widget/component/userCard/userCard.js");a.exports=function(e){var t="/api/lemmapv?id="+e.newLemmaIdEnc+"&r="+Math.random();n.getJSON(t,function(e){e&&"undefined"!=typeof e.pv&&null!=e.pv?n("#j-lemmaStatistics-pv").text(e.pv):n("#j-lemmaStatistics-pv").parent().hide()});var a=n(".j-modified-time").text();n(".j-modified-time").text(i(a)).show(),r({host:".lemma-statistics .show-userCard"})}});
;define("wiki-lemma:widget/lemma_content/mainContent/polysemantList/polysemantList.js",function(o,n,s){var i=o("wiki-common:widget/lib/jquery/jquery.js");s.exports=function(){var o=i(".polysemant-list"),n=o.find(".toggle"),s=(o.find(".polysemantList-addButton"),o.find(".polysemantList-wrapper"));o.on("click",".toggle",function(){n.hasClass("expand")?(n.removeClass("expand").addClass("collapse"),s.show()):(n.removeClass("collapse").addClass("expand"),s.hide())}).on("click",".fold-on",function(){s.css("height","auto"),s.find(".fold-on").hide().siblings(".fold-off").show()}).on("click",".fold-off",function(){s.css("height",96),s.find(".fold-off").hide().siblings(".fold-on").show()})}});
;define("wiki-lemma:widget/lemma_content/mainContent/sideCatalog/sideCatalog.js",function(o,t,i){var l=o("wiki-common:widget/lib/jquery/jquery.js"),n=function(o){var t=l(".side-catalog"),i=(l(".side-catalog .toggle-button"),l(".side-catalog .go-up")),n=l(".side-catalog .go-down"),s=l(".side-catalog .arrow"),e=l(".side-catalog .catalog-scroller"),a=e.find(".catalog-list"),c=l(".content-wrapper"),r=l(".right-wrap"),d=this,f=function(){var o=e.scrollTop(),t=e.find(".catalog-list").height(),l=e.height();0>=o?i.addClass("disable"):i.removeClass("disable"),o>=t-l?n.addClass("disable"):n.removeClass("disable")};this.scrollUp=function(o){var t=19*o,i=e.scrollTop();e.stop().animate({scrollTop:i-t},200,function(){f(),n.removeClass("disable")})},this.scrollDown=function(o){var t=19*o,l=e.scrollTop();e.stop().animate({scrollTop:l+t},200,function(){i.removeClass("disable"),f()})},this.toDisplay=function(){var o=l(".side-content"),i=1200,n=o.offset().top+o.height(),s=Math.max(n,i),e=l(window).scrollTop();e>=s?t.css("visibility","visible"):t.css("visibility","hidden");var a=c.offset().top+c.height(),r=l(window).height()+e;if(r>a){var d=r-a+10;t.css("bottom",d+"px")}else t.css("bottom","10px")},this.scrollTo=function(o){var i=t.find('[href="#'+o+'"]');if(!(i.length<=0)){i=i.parents(".catalog-title");var l=i.offset().top-a.offset().top+5;i.offset().top!==a.offset().top&&(e.stop().animate({scrollTop:l-176},300,function(){f()}),s.stop().animate({top:l},300))}};var u=function(){for(var o=l(document.body).find(".lemma-anchor.para-title"),t=l(window).scrollTop(),i=1e4,n=o.eq(0),s=0;s<o.length;s++){var e=o.eq(s),a=Math.abs(e.offset().top-t);i>a&&(i=a,n=e)}return n.attr("name")},p=null,g=function(){p&&(clearTimeout(p),p=null),p=setTimeout(function(){var o=u();d.scrollTo(o)},50),d.toDisplay()},h=function(){var o=e.find(".catalog-list").height(),i=e.height();0>=o-i&&r.hide(),t.on("click",".toggle-button",function(){t.hasClass("collapse")?t.removeClass("collapse"):t.addClass("collapse")}),e.bind("mouseover",function(){e.bind("mousewheel",function(o,t){var i=-t;return 0>i?d.scrollUp(7):d.scrollDown(7),o.stopPropagation(),!1})}).bind("mouseout",function(){e.unbind("mousewheel")}),l(window).bind("scroll",g),l(document).bind("ready",function(){g(),d.toDisplay()}),t.on("click",".go-up",function(){d.scrollUp(5)}),t.on("click",".go-down",function(){d.scrollDown(5)}),t.on("click",".gotop-button",function(){l(window).scrollTop(0)})};setTimeout(function(){h()},2500)};i.exports=n});
;define("wiki-lemma:widget/lemma_content/mainContent/taskLemmasInfoCard/taskLemmasInfoCard.js",function(e){var t=e("wiki-common:widget/lib/jquery/jquery.js"),a=e("wiki-common:widget/lib/jsmart/jsmart.js");a.prototype.registerPlugin("modifier","rawurlencode",function(e){return encodeURIComponent(e)}),a.prototype.registerPlugin("modifier","date_format",function(e,t){var a=timeFormater.build(1e3*parseInt(e,10));return timeFormater.format(a,t)}),a.prototype.registerPlugin("modifier","date_diff",function(e,t,a,i){var n=timeFormater.build(1e3*parseInt(e,10));return timeFormater.diff(n,t,!!a,!!i)});var i=new a('{%if !$errno%}\n{%foreach $list as $i => $item%}{%if $item.status >= 1 && $item.status <=5%}\n<tr>\n<td><a href="{%$item.lemmaUrl|f_escape_xml%}" target="_blank">{%$item.lemmaTitle|f_escape_xml%}</a></td>\n<td>{%if $item.createTime%}{%$item.createTime|date_format: "yyy-MM-dd HH:mm:ss"%}{%else%}-{%/if%}</td>\n<td>{%if $item.createUname%}<a href="http://www.baidu.com/p/{%$item.createUname|rawurlencode|f_escape_path%}?from=wk" target="_blank">{%$item.createUname|f_escape_xml%}</a>{%else%}-{%/if%}</td>\n<td>\n{%if $item.status == 1%}\n待编辑{%elseif $item.status == 2%}\n待提交{%elseif $item.status == 3 || $item.status == 4%}\n待审核{%elseif $item.status == 5%}\n已达标{%/if%}\n</td>\n<td><a href="/usertask/{%$item.taskId|f_escape_path%}" target="_blank">{%$item.taskName|f_escape_xml%}</a></td>\n</tr>\n{%/if%}\n{%/foreach%}\n{%if $list|count < 1%}\n<tr>\n<td colspan="5">无</td>\n</tr>{%/if%}\n{%else%}\n<tr>\n<td colspan="5">出错了，请<a href="">刷新</a>重试</td>\n</tr>{%/if%}');t.ajax({type:"GET",url:"/api/usertask/getlemmatasklist",data:{lemmaTitle:window.baikeInfo.versionInfo.lemmaTitle,lemmaId:window.baikeInfo.versionInfo.lemmaId,tk:t('meta[name="csrf-token"]').attr("content")},cache:!1,success:function(e){t(".checkLemmaDialog-table tbody").html(e.errno?i.fetch({errno:1}):i.fetch({list:e.data}))}})});
;define("wiki-lemma:widget/lemma_content/commonModule/album/album.js",function(i,t,e){var l=i("wiki-common:widget/lib/jquery/jquery.js"),s=function(i){var t=['<a class="lemma-album" title="'+(i.title||"")+'"  href="'+i.linkUrl+'" target="_blank" style="width:'+(i.width+2)+'px;">','<div class="album-wrap" style="width:'+i.width+"px;height:"+i.height+'px;">','<img class="picture" alt="'+i.description+'" src="'+i.coverUrl+'" style="width:'+i.coverWidth+"px;height:"+i.coverHeight+'px;"/>',"</div>",'<div class="description">',i.description,'<span class="number">('+i.total+")</span>","</div>",'<div class="albumBg">','<div class="albumBgFir" style="width:'+(i.width-6)+'px;"></div>','<div class="albumBgSec" style="width:'+(i.width-12)+'px;"></div>',"</div>","</a>"].join("");return l(t)};e.exports={render:s}});
;define("wiki-lemma:widget/lemma_content/commonModule/cellModule/cellModule.js",function(e,n,a){var d=e("wiki-common:widget/lib/jquery/jquery.js"),i=e("wiki-lemma:widget/basicElement/commonModulePager/commonModulePager.js"),o=function(e){var n=e,a=d(n.container),o=null,t=0,l=function(){n.pageNumber<1||(o=new i({container:a.find(".commonModule-pager"),pageNumber:n.pageNumber,handlePageChange:function(e){t=e,a.find("tr[data-pageIndex]").hide(),a.find("tr[data-pageIndex='"+t+"']").show()},handleDisplayDefault:function(){a.find("tr[data-pageIndex]").hide(),a.find("tr[data-pageIndex='"+t+"']").show()},handleDisplayAll:function(){a.find("tr[data-pageIndex]").show()}}))};l()};a.exports=o});
;define("wiki-lemma:widget/lemma_content/commonModule/horizontalModule/horizontalModule.js",function(e,o,a){var l=e("wiki-common:widget/lib/jquery/jquery.js");a.exports=function(e){var o=l(e.container);o.on("click",".toggle-button",function(){var e=l(this),a=e.attr("data-id");e.hasClass("collapsed")?(e.removeClass("collapsed").addClass("expaned"),o.find(".j-submodule-"+a).show()):(e.removeClass("expaned").addClass("collapsed"),o.find(".j-submodule-"+a).hide())})}});
;define("wiki-lemma:widget/lemma_content/commonModule/map/map.js",function(e,n,o){function r(e,n){i=e,m="map"+n;var o={point:{x:parseFloat(s("centerX")||"0"),y:parseFloat(s("centerY")||"0")},marker:{x:parseFloat(s("markerPosX")||"0"),y:parseFloat(s("markerPosY")||"0")},markerTitle:s("markerTitle")||"",markerAddress:s("markerAddress")||"",zoom:s("zoom")?parseInt(s("zoom")):null},r=new BMap.Map(m),a=new BMap.Point(o.point.x,o.point.y);r.centerAndZoom(a,o.zoom),r.centerAndZoom(a),r.enableScrollWheelZoom();var d=!1;if(r.addEventListener("dragend",function(){d||(d=!0,t(10000802))}),r.addEventListener("zoomend",function(){d||(d=!0,t(10000802))}),r.addEventListener("moveend",function(){d||(d=!0,t(10000802))}),r.addControl(new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_SMALL})),o.marker.x&&o.marker.y){var p=new BMap.Marker(new BMap.Point(o.marker.x,o.marker.y));r.addOverlay(p);var l="";if(o.markerTitle){l='<h4 style="font-size:14px; font-weight:bold; color:#CE5423; margin-bottom:8px;">'+o.markerTitle+"</h4>"+(o.markerAddress?'<p  style="font-size:12px;line-height:1.5;">地址：'+o.markerAddress+"</p>":"");var c={width:0,height:0},k=new BMap.InfoWindow(l,c)}p.onclick=function(){this.openInfoWindow(k)}}}var a=e("wiki-common:widget/lib/jquery/jquery.js"),t=e("wiki-common:widget/component/nslog/nslog.js"),i="",m="",s=function(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=i.substr(1).match(n);return null!=o?decodeURIComponent(o[2]):null};o.exports=function(e,n){a.ajax({url:"http://api.map.baidu.com/getscript?v=2.0&ak=2366113ce0b57527403e73a98f157a8e&services=&t=20150529153634",dataType:"script",success:function(){r(e,n)}}),t(10000801)}});
;define("wiki-lemma:widget/lemma_content/commonModule/music/musicAlbum/musicAlbum.js",function(a,l,e){var s=a("wiki-common:widget/lib/jquery/jquery.js"),d=s(".musicAlbum-wrapper"),i=(s(".musicAlbum-model"),function(){d.find(".album-item").addClass("expand"),d.find(".detail-toggle").removeClass("collapse").addClass("expand"),d.find(".musicAlbum-detail").removeClass("collapse").addClass("expand")}),m=function(){d.find(".album-item").removeClass("expand"),d.find(".detail-toggle").removeClass("expand").addClass("collapse"),d.find(".musicAlbum-detail").removeClass("expand").addClass("collapse")},n=function(a){d.find(".j-albumItem-"+a).addClass("expand"),d.find(".j-detailItem-"+a).removeClass("collapse").addClass("expand")},o=function(a){d.find(".j-albumItem-"+a).removeClass("expand"),d.find(".j-detailItem-"+a).addClass("collapse").removeClass("expand")},t=function(){s(".musicAlbum-model").on("click",function(a){var l=s(a.target);l.hasClass("model-list")?(l.addClass("highlight"),l.parent().find(".model-detail").removeClass("highlight"),m()):l.hasClass("model-detail")&&(l.addClass("highlight"),l.parent().find(".model-list").removeClass("highlight"),i())}),s(".musicAlbum-wrapper").on("click",function(a){var l=s(a.target);if(l.hasClass("detail-toggle")){var e=l.attr("data-id");l.hasClass("collapse")?(l.removeClass("collapse").addClass("expand"),n(e)):(l.removeClass("expand").addClass("collapse"),o(e))}})};e.exports=function(){t()}});
;define("wiki-lemma:widget/lemma_content/commonModule/music/musicHot/musicHot.js",function(o,i,t){var a=o("wiki-common:widget/lib/jquery/jquery.js"),e=e||{},m=function(o){var i="http://play.baidu.com/box?__m=mboxCtrl.playSong&__a="+o+"&__o=/_baike&fr=baikePC";!e.mp3Box||e.mp3Box.closed?e.mp3Box=window.open(i):e.mp3Box.location=i},n=function(){a(".musicHot-wrapper").on("click",".listen-icon",function(o){var i=a(o.target),t=i.attr("data-id");t&&""!=t&&m(t)})};a(".musicHot-wrapper .item-name a").attr("href","javascript:void(0)"),t.exports=n});
;define("wiki-lemma:widget/lemma_content/commonModule/noticeIcon/noticeIcon.js",function(e,n,t){function i(e){var n,t=c(e).parent(),i=c(e).outerWidth(),o=t.outerWidth();n=parseInt((o-i)/2,10),c(e).css({left:n})}function o(){i(c(".en_conne_notice .enterprise_tips"))}var c=e("wiki-common:widget/lib/jquery/jquery.js");t.exports=o});
;define("wiki-lemma:widget/lemma_content/commonModule/series/series.js",function(a,e){var r=a("wiki-common:widget/lib/jquery/jquery.js"),s=r("#dramaSeries"),i=r("#dramaSerialList");r("dl:first-child",i).show(),e.init=function(a){a=parseInt(a),s.on("click",".pageBar a",function(){var e=r(this),o=e.parents(".pageBar");if(!e.hasClass("cur"))if(e.hasClass("more"))o.hasClass("unfold")?(r(".pageBar",s).removeClass("unfold"),r(".pageBar .more",s).text("展开")):(r(".pageBar",s).addClass("unfold"),r(".pageBar .more",s).text("收起"));else{var l=parseInt(e.text());r(".pageBar a",s).removeClass("cur"),r(".pageBar a[index="+Math.floor(l/a)+"]",s).addClass("cur"),r("dl",i).hide(),r("dl:nth("+Math.floor(l/a)+")",i).show()}})}});
;define("wiki-lemma:widget/promotion/bottomAd/bottomAd.js",function(o,t,n){function i(o){var t="http://cbjs.baidu.com/js/m.js",n=o.sId,i=e("#bottom-promotion");return o.adManager&&"undefined"!=typeof o.adManager.pcNetUnionBottomBanner?null:(i.show(),m(70000101,window.location.href,{api:"lemma-unionAd-bottom",action:"request"}),void e.getScript(t,function(){m(70000101,window.location.href,{api:"lemma-unionAd-bottom",action:"success"}),a.log({"lemma-unionAd-bottom":i.get(0)},70000102),BAIDU_CLB_fillSlotAsync("1120393",n)}))}var e=o("wiki-common:widget/lib/jquery/jquery.js"),m=o("wiki-common:widget/component/nslog/nslog.js"),a=o("wiki-common:widget/component/testElem/testElem.js");n.exports=i});
;define("wiki-lemma:widget/promotion/fengchao/fengchao.js",function(n,e,o){function t(n){"fengchao"==n?s.log({"lemma-fengchao":l("#side_box_fengchao").get(0)},70000102):"unionAd"==n&&s.log({"lemma-unionAd":l("#side_box_unionAd .union-content").get(0)},70000102)}function i(n){var e=d.get("BAIDUID");if(e){var o=e.substr(e.length-9,4),t=parseInt("0x"+o,16);return t.length<n?t=new Array(n-t.length).join("0")+t:t+="",t.substr(t.length-n,n)}}function a(){return parseInt(i(1),10)}function c(n,e){l.ajax({dataType:"json",url:"/api/wikiui/getasp",data:n,success:function(n){r(10000914),g(n||{},e)},error:function(){r(10000915),u.remove(),t("unionAd"),f(e)}})}var l=n("wiki-common:widget/lib/jquery/jquery.js"),d=n("wiki-common:widget/util/cookie.js"),r=n("wiki-common:widget/component/nslog/nslog.js"),s=n("wiki-common:widget/component/testElem/testElem.js"),m=null,u=null,g=function(n,e){var o="",i={};0===n.err_no&&n.ad_place_list&&n.ad_place_list.length>0&&n.ad_place_list[0].ad_num>0?(i=n.ad_place_list[0],o="<style>"+i.ad_place_css+"</style>"+i.ad_place_data+"<script>"+i.ad_place_js+"</script>",u.html(o).show(),t("fengchao")):(u.remove(),t("unionAd"),f(e))},p=function(n,e){var o=a(),t=[location.protocol,"//",location.host,location.pathname].join(""),i=encodeURIComponent(t+"?lemmaid="+n.newLemmaId),l="word="+n.encodeLemmaTitle+"&asp_url="+i;5>o?(l+="&eid=800",c(l,e),r(10000913)):(l+="&eid=802",c(l,e),r(10000913))},f=function(n){"undefined"==typeof m.pcNetUnionRight&&n&&n.errFn&&n.dom&&n.errFn(n.dom)},_=function(n,e){m=n.adManager||{},u=l("#side_box_fengchao"),"undefined"!=typeof m.pcFengchaoRight?(u.remove(),f(e)):p(n,e)};o.exports=_});
;define("wiki-lemma:widget/promotion/guessLike/guessLike.js",function(e,i,t){function n(e){var i=l.get("BAIDUID");if(i){var t=i.substr(i.length-9,4),n=parseInt("0x"+t,16);return n.length<e?n=new Array(e-n.length).join("0")+n:n+="",n.substr(n.length-e,e)}}function a(){return parseInt(n(1),10)}function s(e){m.init(e)}var o=e("wiki-common:widget/lib/jquery/jquery.js"),r=e("wiki-common:widget/lib/jsmart/jsmart.js"),l=e("wiki-common:widget/util/cookie.js"),c=e("wiki-common:widget/component/nslog/nslog.js"),f=new r('{%foreach $favorites as $index=>$item%}\n{%if $index > 9%}\n{%break%}\n{%/if%}\n<li><a href="{%$item.url|f_escape_xml%}" target="_blank">{%$item.title|f_escape_xml%}</a></li>\n{%/foreach%}'),m={init:function(e){if(this.el=o("#fc_guess_like"),this.param=e,!e.adManager||"undefined"==typeof e.adManager.pcFengchaoGuess){var i=a();this.fetch(5===i||6===i?201:202)}},fetch:function(e){var i=this;o.ajax({url:"/api/wikiui/guesslike",type:"GET",dataType:"json",data:{url:[location.protocol,"//",location.host,location.pathname].join(""),lemmaTitle:this.param.lemmaTitle,eid:e},success:function(e){0===e.err_no&&i.render(e)}})},render:function(e){var i={};try{i=o.parseJSON(e.ad_place_list[0].ad_place_data)}catch(t){}i.ads&&i.ads.length>0&&(c(10050100),this.el.show().find("ul").html(f.fetch({favorites:i.ads})))}};t.exports={init:s}});
;define("wiki-lemma:widget/promotion/rightAd/rightAd.js",function(i,t,n){{var a=i("wiki-common:widget/lib/jquery/jquery.js");i("wiki-common:widget/component/nslog/nslog.js")}n.exports=function(i){var t=function(i){var t=['<div class="right-ad">','<a class="rightAd-link" nslog-type="10002202" nslog-params=\'{"adId":"'+i.adId+'", "adTitle": "'+i.name+'", "adPos": 4}\' title="'+i.text+'" href="'+i.url+'" target="_blank">','<img src="'+i.picUrl+'" alt="'+i.text+'" />',"</a>",'<a class="rightAd-close" href="javascript:;"></a>',"</div>"].join(""),n=a(t),o=n.find(".rightAd-close");return o.on("click",function(){n.hide()}),n},n=t(i[0]);n.appendTo(a("body"))}});
;define("wiki-lemma:widget/promotion/rightBigAd/rightBigAd.js",function(t,i,e){var o=t("wiki-common:widget/lib/jquery/jquery.js");e.exports=function(t){o(".lemmaWgt-promotion-rightBigAd").html('<a nslog-type="10002202" nslog-params=\'{"adId": "'+t[0].adId+'", "adTitle": "'+t[0].name+'", "adPos": 9}\' title="'+t[0].text+'" href="'+t[0].url+'" target="_blank"><img src="'+t[0].picUrl+'" alt="'+t[0].text+'" /></a>'),o(".lemmaWgt-promotion-rightBigAd").show()}});
;define("wiki-lemma:widget/promotion/rightPreciseAd/rightPreciseAd.js",function(t,e,i){var r=t("wiki-common:widget/lib/jquery/jquery.js");i.exports=function(t){if(40==t[0].adId){var e=r(".lemmaWgt-promotion-rightPreciseAd").attr("data-lemmaId"),i=r(".lemmaWgt-promotion-rightPreciseAd").attr("data-lemmaTitle");t[0].url=t[0].url+"&wd="+i+"&lemmaId="+e}r(".lemmaWgt-promotion-rightPreciseAd").html('<a nslog-type="10002202" nslog-params=\'{"adId":"'+t[0].adId+'", "adTitle": "'+t[0].name+'", "adPos": 5}\' title="'+t[0].text+'" href="'+t[0].url+'" target="_blank"><img src="'+t[0].picUrl+'" alt="'+t[0].text+'" /></a>'),r(".lemmaWgt-promotion-rightPreciseAd").show()}});
;define("wiki-lemma:widget/promotion/slide/slide.js",function(e,a,i){var n=e("wiki-common:widget/lib/jquery/jquery.js"),o=e("wiki-common:widget/lib/jsmart/jsmart.js"),r=e("wiki-common:widget/ui/pager/horPager/horPager.js"),t=e("wiki-common:widget/ui/carousel/carousel.js"),s=new o('{%foreach $data as $ad%}\n<dd class="wgt_carousel_aniUnit">\n<a href="{%$ad.url|f_escape_xml%}" target="_blank" title="{%$ad.text|f_escape_xml%}" nslog-type="10002202" nslog-params=\'{"adId":"{%$ad.adId|f_escape_xml%}", "adTitle":"{%$ad.name|f_escape_xml%}", "adPos": 2}\'>\n<img src="{%$ad.picUrl|f_escape_xml%}" />\n</a>\n</dd>\n{%/foreach%}');i.exports=function(e){var a=s.fetch({data:e});if(n(".lemmaWgt-promotion-slide .promotion_viewport dl").html(a),e.length>1){var i=new t({container:n(".lemmaWgt-promotion-slide .promotion_viewport dl"),aniUnitSize:{width:270,height:260},autoPlayInterval:5e3,aniConfig:{duration:400,direction:"left"},onAniComplete:function(e){o.reset({curIndex:e+1})}}),o=new r({pContainer:n(".lemmaWgt-promotion-slide .promotion_viewport_pager"),template:'<span class="pTagBox">\n<a href="javascript:;" class="pTag prev" p-index="{%$pagers.prev.index|f_escape_xml%}"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-left"></em></a><span>{%foreach $pagers.normal as $pager%}<a href="javascript:;" class="dot pTag{%if $pager.state == "cur"%} cur{%/if%}"{%if $pager.state != "cur"%} p-index="{%$pager.index|f_escape_xml%}"{%/if%}><em class="cmn-icon cmn-icons cmn-icons_userbar-new"></em></a>{%/foreach%}</span><a href="javascript:;" class="pTag next" p-index="{%$pagers.next.index|f_escape_xml%}"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-right"></em></a>\n</span>',conTotalCount:e.length,conPerPage:1,pMaxCount:e.length,onIndexChange:function(e,a){n(a.currentTarget).hasClass("prev")?i.play(-1):n(a.currentTarget).hasClass("next")?i.play():i.play(e-1)}});o.show()}else n(".lemmaWgt-promotion-slide .promotion_viewport_pager").remove();n(".lemmaWgt-promotion-slide").show()}});
;define("wiki-lemma:widget/promotion/topAd/topAd.js",function(t,e,o){var i=t("wiki-common:widget/lib/jquery/jquery.js"),n=t("wiki-common:widget/component/nslog/nslog.js");o.exports=function(t){var t=t[0],e='<a target="_blank" nslog-type="10002202" nslog-params=\'{"adId":"'+t.adId+'", "adTitle": "'+t.name+'", "adPos": 3}\' href="'+t.url+'" title="'+t.text+'" style="background:url('+t.picUrl+') 0px 0px no-repeat; width:200px; height:100px; outline:0; font-size:0; text-indent:-999em; display:block;position:absolute;right:0px;top:-5px;" nslog-type="40000302"></a>';i(".header-wrapper .layout").append(i(e)),n(40000301)}});
;define("wiki-lemma:widget/promotion/unionAd/unionAd.js",function(i,o,n){function d(i){var o={adId:"u1997633",sClassName:"union"};o?(r(i,o),t(i).addClass(o.sClassName)):t(i).remove()}function r(i,o){t(i).find(".union-content").attr("id","cpro_"+o.adId),(window.cproArray=window.cproArray||[]).push({id:o.adId}),(window.cproStyleApi=window.cproStyleApi||{})[o.adId]={wn:2,hn:8},t.getScript("http://cpro.baidustatic.com/cpro/ui/c.js",function(){t(i).css("display","block")})}var t=i("wiki-common:widget/lib/jquery/jquery.js");n.exports=d});
;define("wiki-lemma:widget/promotion/unionAdFromPs/unionAdFromPs.js",function(e,n,i){function o(e){var n=t("#unionAd_fromPs");return e.adManager&&"undefined"!=typeof e.adManager.pcNetUnionSearchRecommend?n.remove():void t.getScript("http://su.bdimg.com/static/dspui/js/ls.js",function(){setTimeout(function(){n.find("iframe").length<0&&n.remove()},2e3)})}var t=e("wiki-common:widget/lib/jquery/jquery.js");i.exports=o});
;define("wiki-lemma:widget/promotion/vbaike/vbaike.js",function(e,a,n){var i=e("wiki-common:widget/lib/jquery/jquery.js"),o=e("wiki-common:widget/lib/jsmart/jsmart.js"),t=e("wiki-common:widget/ui/pager/horPager/horPager.js"),r=e("wiki-common:widget/ui/carousel/carousel.js"),m=new o('{%foreach $data as $ad%}\n<dd class="wgt_carousel_aniUnit">\n<a href="{%$ad.url|f_escape_xml%}" target="_blank" title="{%$ad.text|f_escape_xml%}" nslog-type="10002202" nslog-params=\'{"adId":"{%$ad.adId|f_escape_xml%}", "adTitle":"{%$ad.name|f_escape_xml%}", "adPos": 1}\'>\n<img src="{%$ad.picUrl|f_escape_xml%}" />\n</a>\n</dd>\n{%/foreach%}');n.exports=function(e){var a=m.fetch({data:e});if(i(".lemmaWgt-promotion-vbaike .promotion_viewport dl").html(a),e.length>1){var n=new r({container:i(".lemmaWgt-promotion-vbaike .promotion_viewport dl"),aniUnitSize:{width:268,height:152},autoPlayInterval:5e3,aniConfig:{duration:400,direction:"left"},onAniComplete:function(e){o.reset({curIndex:e+1})}}),o=new t({pContainer:i(".lemmaWgt-promotion-vbaike .promotion_viewport_pager"),template:'\n<span class="pTagBox">\n<a href="javascript:;" class="pTag prev" p-index="{%$pagers.prev.index|f_escape_xml%}"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-left"></em></a>\n<a href="javascript:;" class="pTag next" p-index="{%$pagers.next.index|f_escape_xml%}"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-right"></em></a>\n</span>\n',conTotalCount:e.length,conPerPage:1,pMaxCount:e.length,onIndexChange:function(e,a){i(a.currentTarget).hasClass("prev")?n.play(-1):i(a.currentTarget).hasClass("next")?n.play():n.play(e-1)}});o.show()}i(".lemmaWgt-promotion-vbaike").show()}});