oojs.define({name:"anticheatMobile",namespace:"rs.business",$anticheatMobile:function(){window.antiArray&&document.getElementById("container")&&this.check("container",window.antiArray)},imTimeSign:0,touchX:0,touchY:0,touchStartTime:0,touchEndTime:0,pressTime:0,templateHeight:0,templateWidth:0,touchMoveNum:0,touchMoveTotalTime:0,onTouchStart:function(a){this.touchStartTime=this.getEventTime(a);this.touchMoveNum++},getEventTime:function(a){return a.timeStamp!==0?a.timeStamp:(new Date).getTime()},createEvent:function(a){var b=
document.createEvent("HTMLEvents");b.initEvent("click",false,false);b.eventType="fastclick";a.onclick=function(){a.dispatchEvent(b)}},getCheckCode:function(a){var b=0;if(a=/\.php\?(url=)?([0-9a-zA-Z_-]*)\./.exec(a)){for(var c=this.pressTime*this.imTimeSign%99+9,e=a[2].length,d=0;d<c;++d)b+=a[2].charCodeAt(this.touchX*d%e);return b}return false},getCkValue:function(a){if(typeof a!=="string")return false;a=this.getCheckCode(a);if(a!==false)return a=[a,this.pressTime,this.touchX,this.touchY,this.templateWidth,
this.templateHeight,this.touchMoveNum,this.touchMoveTotalTime].join(".");else return false},addCkOnUrl:function(a){var b=this.getCkValue(a),c=/&ck=[\w.]*/;if(b===false)return a;if(a.indexOf("&ck=")!==-1)a=a.replace(c,"");a+="&ck="+b;return a},touchClickHandler:function(a){var b=a.target;if(b.tagName.toLowerCase()!=="a")b=this.resTag(b);if(b===null)return false;this.touchEndTime=this.getEventTime(a);this.pressTime=
this.touchEndTime-this.touchStartTime;this.touchMoveTotalTime+=this.pressTime;a=this.getClickArea(b,a);this.touchX=a.x;this.touchY=a.y;this.imTimeSign=this.antiCheatArray[/.*(\d+)/.exec(b.id)[1]];b.href=this.addCkOnUrl(b.href)},getClickArea:function(a,b){var c={x:0,y:0};if(!a||!b)return c;var e=0,d=0;if(a.getBoundingClientRect){d=document.body;if(document.documentElement&&document.documentElement.scrollTop)d=document.documentElement;e=a.getBoundingClientRect().left+d.scrollLeft;d=a.getBoundingClientRect().top+
d.scrollTop}else{e=a.offsetLeft;d=a.offsetTop;for(var f=a.offsetParent;f;){e+=f.offsetLeft;d+=f.offsetTop;f=f.offsetParent}for(;a&&a!=document.body;){if(a.tagName!="TR"&&document.defaultView.getComputedStyle(a).display!=="inline"){e-=a.scrollLeft;d-=a.scrollTop}a=a.parentNode}}c.x=b.pageX-e;c.y=b.pageY-d;return c},resTag:function(a){a=a.parentNode;if(a.tagName.toLowerCase()!=="a"&&a.tagName.toLowerCase()!=="body")return this.resTag(a);return a},bind:function(a,b,c){window.addEventListener?a.addEventListener(b,
c,false):a.attachEvent("on"+b,c)},formatEventObj:function(a){a=a||window.event;a.target=a.target||a.srcElement;return a},check:function(a,b){this.antiCheatArray=b||window.antiCheatArray;var c=document.getElementById(a);this.templateWidth=c.offsetWidth;this.templateHeight=c.offsetHeight;var e=c.getElementsByTagName("a");this.bind(c,"touchstart",this.onTouchStart.proxy(this));for(c=0;c<e.length;c++){var d=e[c].className;if(d){d=d.toLowerCase();if(d==="gylogo"||d==="bdlogo"||d.substring(0,7)==="bd-logo")continue}this.bind(e[c],
"click",this.touchClickHandler.proxy(this))}}});
